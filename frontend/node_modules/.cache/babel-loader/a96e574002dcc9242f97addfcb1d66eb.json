{"ast":null,"code":"import cheerio from \"cheerio\";\nimport Axios from \"axios\";\nexport const getData = async link => {\n  Axios({\n    method: 'get',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    url: 'https://localhost:44346/Order/Order/GiveOrder',\n    data: order\n  }).then(function (response) {\n    console.log(response);\n  });\n  const url = `https://cors-anywhere.herokuapp.com/${link}`;\n  // const url = link;\n\n  const response = await fetch(url);\n  const body = await response.text();\n  let $ = cheerio.load(body);\n  const data = [\"\"];\n  $(\"td.l\").each((i, element) => {\n    if (element.children.length === 1) {\n      if (element.children[0].type === \"text\") {\n        if (element.children[0].data === \"zajęcia dodatkowe\") {\n          data.push(\"zajecia dodatkowe\");\n        } else {\n          data.push(\"okienko\");\n        }\n      }\n    }\n    element.children.forEach(x => {\n      if (x.type === \"tag\") {\n        if (x.children[0]) {\n          if (x.children.length > 1) {\n            if (x.children[0].type === \"tag\") {\n              if (x.children[0].children[0].type === \"text\") {\n                data.push(x.children[0].children[0].data);\n              }\n            }\n            if (x.children[4].type === \"tag\") {\n              if (x.children[4].children[0].type === \"text\") {\n                data.push(x.children[4].children[0].data);\n              }\n            }\n            return;\n          }\n          if (x.children[0].type === \"tag\") {\n            if (x.children[0].children[0].type === \"text\") {\n              data.push(x.children[0].children[0].data);\n            }\n          } else if (x.children[0].type === \"text\") {\n            if (x.children[0].data.includes(\"#\")) return;\n            data.push(x.children[0].data);\n          }\n        } else {\n          data.push(\"<br>\");\n        }\n      } else if (x.type === \"text\") {\n        if (x.data.trim() === \"-(P)\" || x.data.trim() === \"-(N)\") {\n          data.push(x.data);\n        }\n      }\n    });\n  });\n  data.shift();\n  return data;\n};\nconst Scrapper = async url => {\n  return await getData(url);\n};\n_c = Scrapper;\nexport default Scrapper;\nvar _c;\n$RefreshReg$(_c, \"Scrapper\");","map":{"version":3,"names":["cheerio","Axios","getData","link","method","headers","url","data","order","then","response","console","log","fetch","body","text","$","load","each","i","element","children","length","type","push","forEach","x","includes","trim","shift","Scrapper"],"sources":["C:/programowanko/react/schedule-formatter/schedule-formatter/frontend/src/data/Scrapper.tsx"],"sourcesContent":["import cheerio from \"cheerio\";\r\nimport Axios from \"axios\";\r\n\r\nexport const getData = async (link: string) => {\r\n  Axios({\r\n    method: 'get',\r\n    headers: { 'Content-Type': 'application/json'},\r\n    url: 'https://localhost:44346/Order/Order/GiveOrder',\r\n    data: order,\r\n  }).then(function (response) {\r\n    console.log(response);\r\n  });\r\n\r\n  const url = `https://cors-anywhere.herokuapp.com/${link}`;\r\n  // const url = link;\r\n\r\n  const response = await fetch(url);\r\n  const body = await response.text();\r\n\r\n  let $ = cheerio.load(body);\r\n\r\n  const data = [\"\"];\r\n\r\n  $(\"td.l\").each((i, element) => {\r\n    if (element.children.length === 1) {\r\n      if (element.children[0].type === \"text\") {\r\n        if (element.children[0].data === \"zajęcia dodatkowe\") {\r\n          data.push(\"zajecia dodatkowe\");\r\n        } else {\r\n          data.push(\"okienko\");\r\n        }\r\n      }\r\n    }\r\n    element.children.forEach((x) => {\r\n      if (x.type === \"tag\") {\r\n        if (x.children[0]) {\r\n          if (x.children.length > 1) {\r\n            if (x.children[0].type === \"tag\") {\r\n              if (x.children[0].children[0].type === \"text\") {\r\n                data.push(x.children[0].children[0].data);\r\n              }\r\n            }\r\n            if (x.children[4].type === \"tag\") {\r\n              if (x.children[4].children[0].type === \"text\") {\r\n                data.push(x.children[4].children[0].data);\r\n              }\r\n            }\r\n            return\r\n          }\r\n          if (x.children[0].type === \"tag\") {\r\n            if (x.children[0].children[0].type === \"text\") {\r\n              data.push(x.children[0].children[0].data);\r\n            }\r\n          } else if (x.children[0].type === \"text\") {\r\n            if (x.children[0].data.includes(\"#\")) return;\r\n            data.push(x.children[0].data);\r\n          }\r\n        } else {\r\n          data.push(\"<br>\");\r\n        }\r\n      } else if (x.type === \"text\") {\r\n        if (x.data.trim() === \"-(P)\" || x.data.trim() === \"-(N)\") {\r\n          data.push(x.data);\r\n        }\r\n      }\r\n    });\r\n  });\r\n  data.shift();\r\n  return data;\r\n};\r\n\r\nconst Scrapper = async (url: string) => {\r\n  return await getData(url);\r\n};\r\n\r\nexport default Scrapper;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}