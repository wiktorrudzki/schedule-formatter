{"ast":null,"code":"import getNCheck from \"nth-check\";\nimport boolbase from \"boolbase\";\nfunction getChildFunc(next, adapter) {\n  return function (elem) {\n    var parent = adapter.getParent(elem);\n    return parent != null && adapter.isTag(parent) && next(elem);\n  };\n}\nexport var filters = {\n  contains: function contains(next, text, _ref) {\n    var adapter = _ref.adapter;\n    return function contains(elem) {\n      return next(elem) && adapter.getText(elem).includes(text);\n    };\n  },\n  icontains: function icontains(next, text, _ref2) {\n    var adapter = _ref2.adapter;\n    var itext = text.toLowerCase();\n    return function icontains(elem) {\n      return next(elem) && adapter.getText(elem).toLowerCase().includes(itext);\n    };\n  },\n  // Location specific methods\n  \"nth-child\": function nthChild(next, rule, _ref3) {\n    var adapter = _ref3.adapter,\n      equals = _ref3.equals;\n    var func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = 0; i < siblings.length; i++) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\": function nthLastChild(next, rule, _ref4) {\n    var adapter = _ref4.adapter,\n      equals = _ref4.equals;\n    var func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\": function nthOfType(next, rule, _ref5) {\n    var adapter = _ref5.adapter,\n      equals = _ref5.equals;\n    var func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = 0; i < siblings.length; i++) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\": function nthLastOfType(next, rule, _ref6) {\n    var adapter = _ref6.adapter,\n      equals = _ref6.equals;\n    var func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  // TODO determine the actual root element\n  root: function root(next, _rule, _ref7) {\n    var adapter = _ref7.adapter;\n    return function (elem) {\n      var parent = adapter.getParent(elem);\n      return (parent == null || !adapter.isTag(parent)) && next(elem);\n    };\n  },\n  scope: function scope(next, rule, options, context) {\n    var equals = options.equals;\n    if (!context || context.length === 0) {\n      // Equivalent to :root\n      return filters[\"root\"](next, rule, options);\n    }\n    if (context.length === 1) {\n      // NOTE: can't be unpacked, as :has uses this for side-effects\n      return function (elem) {\n        return equals(context[0], elem) && next(elem);\n      };\n    }\n    return function (elem) {\n      return context.includes(elem) && next(elem);\n    };\n  },\n  hover: dynamicStatePseudo(\"isHovered\"),\n  visited: dynamicStatePseudo(\"isVisited\"),\n  active: dynamicStatePseudo(\"isActive\")\n};\n/**\n * Dynamic state pseudos. These depend on optional Adapter methods.\n *\n * @param name The name of the adapter method to call.\n * @returns Pseudo for the `filters` object.\n */\nfunction dynamicStatePseudo(name) {\n  return function dynamicPseudo(next, _rule, _ref8) {\n    var adapter = _ref8.adapter;\n    var func = adapter[name];\n    if (typeof func !== \"function\") {\n      return boolbase.falseFunc;\n    }\n    return function active(elem) {\n      return func(elem) && next(elem);\n    };\n  };\n}","map":{"version":3,"mappings":"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","names":["getNCheck","boolbase","getChildFunc","next","adapter","elem","parent","getParent","isTag","filters","contains","text","getText","includes","icontains","itext","toLowerCase","rule","equals","func","falseFunc","trueFunc","nthChild","siblings","getSiblings","pos","i","length","nthLastChild","nthOfType","currentSibling","getName","nthLastOfType","root","_rule","scope","options","context","hover","dynamicStatePseudo","visited","active","name","dynamicPseudo"],"sources":["pseudo-selectors/filters.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}