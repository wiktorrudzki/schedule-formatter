{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyPseudoArgs = exports.pseudos = void 0;\n// While filters are precompiled, pseudos get called when they are needed\nexports.pseudos = {\n  empty: function (elem, _a) {\n    var adapter = _a.adapter;\n    return !adapter.getChildren(elem).some(function (elem) {\n      // FIXME: `getText` call is potentially expensive.\n      return adapter.isTag(elem) || adapter.getText(elem) !== \"\";\n    });\n  },\n  \"first-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    if (adapter.prevElementSibling) {\n      return adapter.prevElementSibling(elem) == null;\n    }\n    var firstChild = adapter.getSiblings(elem).find(function (elem) {\n      return adapter.isTag(elem);\n    });\n    return firstChild != null && equals(elem, firstChild);\n  },\n  \"last-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (equals(elem, siblings[i])) return true;\n      if (adapter.isTag(siblings[i])) break;\n    }\n    return false;\n  },\n  \"first-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n    var elemName = adapter.getName(elem);\n    for (var i = 0; i < siblings.length; i++) {\n      var currentSibling = siblings[i];\n      if (equals(elem, currentSibling)) return true;\n      if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === elemName) {\n        break;\n      }\n    }\n    return false;\n  },\n  \"last-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var siblings = adapter.getSiblings(elem);\n    var elemName = adapter.getName(elem);\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      var currentSibling = siblings[i];\n      if (equals(elem, currentSibling)) return true;\n      if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === elemName) {\n        break;\n      }\n    }\n    return false;\n  },\n  \"only-of-type\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    var elemName = adapter.getName(elem);\n    return adapter.getSiblings(elem).every(function (sibling) {\n      return equals(elem, sibling) || !adapter.isTag(sibling) || adapter.getName(sibling) !== elemName;\n    });\n  },\n  \"only-child\": function (elem, _a) {\n    var adapter = _a.adapter,\n      equals = _a.equals;\n    return adapter.getSiblings(elem).every(function (sibling) {\n      return equals(elem, sibling) || !adapter.isTag(sibling);\n    });\n  }\n};\nfunction verifyPseudoArgs(func, name, subselect, argIndex) {\n  if (subselect === null) {\n    if (func.length > argIndex) {\n      throw new Error(\"Pseudo-class :\".concat(name, \" requires an argument\"));\n    }\n  } else if (func.length === argIndex) {\n    throw new Error(\"Pseudo-class :\".concat(name, \" doesn't have any arguments\"));\n  }\n}\nexports.verifyPseudoArgs = verifyPseudoArgs;","map":{"version":3,"mappings":"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","names":["exports","empty","elem","_a","adapter","getChildren","some","isTag","getText","equals","prevElementSibling","firstChild","getSiblings","find","siblings","i","length","elemName","getName","currentSibling","every","sibling","verifyPseudoArgs","func","name","subselect","argIndex","Error"],"sources":["pseudo-selectors/pseudos.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}