{"ast":null,"code":"import { parse } from \"css-what\";\nimport { filters } from \"./filters.js\";\nimport { pseudos, verifyPseudoArgs } from \"./pseudos.js\";\nimport { aliases } from \"./aliases.js\";\nimport { subselects } from \"./subselects.js\";\nexport { filters, pseudos, aliases };\nexport function compilePseudoSelector(next, selector, options, context, compileToken) {\n  var _a;\n  const {\n    name,\n    data\n  } = selector;\n  if (Array.isArray(data)) {\n    if (!(name in subselects)) {\n      throw new Error(`Unknown pseudo-class :${name}(${data})`);\n    }\n    return subselects[name](next, data, options, context, compileToken);\n  }\n  const userPseudo = (_a = options.pseudos) === null || _a === void 0 ? void 0 : _a[name];\n  const stringPseudo = typeof userPseudo === \"string\" ? userPseudo : aliases[name];\n  if (typeof stringPseudo === \"string\") {\n    if (data != null) {\n      throw new Error(`Pseudo ${name} doesn't have any arguments`);\n    }\n    // The alias has to be parsed here, to make sure options are respected.\n    const alias = parse(stringPseudo);\n    return subselects[\"is\"](next, alias, options, context, compileToken);\n  }\n  if (typeof userPseudo === \"function\") {\n    verifyPseudoArgs(userPseudo, name, data, 1);\n    return elem => userPseudo(elem, data) && next(elem);\n  }\n  if (name in filters) {\n    return filters[name](next, data, options, context);\n  }\n  if (name in pseudos) {\n    const pseudo = pseudos[name];\n    verifyPseudoArgs(pseudo, name, data, 2);\n    return elem => pseudo(elem, options, data) && next(elem);\n  }\n  throw new Error(`Unknown pseudo-class :${name}`);\n}","map":{"version":3,"mappings":"AAeA,SAASA,KAAK,QAAwB,UAAU;AAChD,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,OAAO,EAAEC,gBAAgB,QAAQ,cAAc;AACxD,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,UAAU,QAAQ,iBAAiB;AAE5C,SAASJ,OAAO,EAAEC,OAAO,EAAEE,OAAO;AAElC,OAAM,SAAUE,qBAAqB,CACjCC,IAAgC,EAChCC,QAAwB,EACxBC,OAA2C,EAC3CC,OAA2B,EAC3BC,YAA6C;;EAE7C,MAAM;IAAEC,IAAI;IAAEC;EAAI,CAAE,GAAGL,QAAQ;EAE/B,IAAIM,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;IACrB,IAAI,EAAED,IAAI,IAAIP,UAAU,CAAC,EAAE;MACvB,MAAM,IAAIW,KAAK,CAAC,yBAAyBJ,IAAI,IAAIC,IAAI,GAAG,CAAC;;IAG7D,OAAOR,UAAU,CAACO,IAAI,CAAC,CAACL,IAAI,EAAEM,IAAI,EAAEJ,OAAO,EAAEC,OAAO,EAAEC,YAAY,CAAC;;EAGvE,MAAMM,UAAU,GAAG,aAAO,CAACf,OAAO,0CAAGU,IAAI,CAAC;EAE1C,MAAMM,YAAY,GACd,OAAOD,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAGb,OAAO,CAACQ,IAAI,CAAC;EAE/D,IAAI,OAAOM,YAAY,KAAK,QAAQ,EAAE;IAClC,IAAIL,IAAI,IAAI,IAAI,EAAE;MACd,MAAM,IAAIG,KAAK,CAAC,UAAUJ,IAAI,6BAA6B,CAAC;;IAGhE;IACA,MAAMO,KAAK,GAAGnB,KAAK,CAACkB,YAAY,CAAC;IACjC,OAAOb,UAAU,CAAC,IAAI,CAAC,CAACE,IAAI,EAAEY,KAAK,EAAEV,OAAO,EAAEC,OAAO,EAAEC,YAAY,CAAC;;EAGxE,IAAI,OAAOM,UAAU,KAAK,UAAU,EAAE;IAClCd,gBAAgB,CAACc,UAAU,EAAEL,IAAI,EAAEC,IAAI,EAAE,CAAC,CAAC;IAE3C,OAAQO,IAAI,IAAKH,UAAU,CAACG,IAAI,EAAEP,IAAI,CAAC,IAAIN,IAAI,CAACa,IAAI,CAAC;;EAGzD,IAAIR,IAAI,IAAIX,OAAO,EAAE;IACjB,OAAOA,OAAO,CAACW,IAAI,CAAC,CAACL,IAAI,EAAEM,IAAc,EAAEJ,OAAO,EAAEC,OAAO,CAAC;;EAGhE,IAAIE,IAAI,IAAIV,OAAO,EAAE;IACjB,MAAMmB,MAAM,GAAGnB,OAAO,CAACU,IAAI,CAAC;IAC5BT,gBAAgB,CAACkB,MAAM,EAAET,IAAI,EAAEC,IAAI,EAAE,CAAC,CAAC;IAEvC,OAAQO,IAAI,IAAKC,MAAM,CAACD,IAAI,EAAEX,OAAO,EAAEI,IAAI,CAAC,IAAIN,IAAI,CAACa,IAAI,CAAC;;EAG9D,MAAM,IAAIJ,KAAK,CAAC,yBAAyBJ,IAAI,EAAE,CAAC;AACpD","names":["parse","filters","pseudos","verifyPseudoArgs","aliases","subselects","compilePseudoSelector","next","selector","options","context","compileToken","name","data","Array","isArray","Error","userPseudo","stringPseudo","alias","elem","pseudo"],"sources":["pseudo-selectors/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}