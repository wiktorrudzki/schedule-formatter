{"ast":null,"code":"import boolbase from \"boolbase\";\n/**\n * All reserved characters in a regex, used for escaping.\n *\n * Taken from XRegExp, (c) 2007-2020 Steven Levithan under the MIT license\n * https://github.com/slevithan/xregexp/blob/95eeebeb8fac8754d54eafe2b4743661ac1cf028/src/xregexp.js#L794\n */\nvar reChars = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\nfunction escapeRegex(value) {\n  return value.replace(reChars, \"\\\\$&\");\n}\n/**\n * Attributes that are case-insensitive in HTML.\n *\n * @private\n * @see https://html.spec.whatwg.org/multipage/semantics-other.html#case-sensitivity-of-selectors\n */\nvar caseInsensitiveAttributes = new Set([\"accept\", \"accept-charset\", \"align\", \"alink\", \"axis\", \"bgcolor\", \"charset\", \"checked\", \"clear\", \"codetype\", \"color\", \"compact\", \"declare\", \"defer\", \"dir\", \"direction\", \"disabled\", \"enctype\", \"face\", \"frame\", \"hreflang\", \"http-equiv\", \"lang\", \"language\", \"link\", \"media\", \"method\", \"multiple\", \"nohref\", \"noresize\", \"noshade\", \"nowrap\", \"readonly\", \"rel\", \"rev\", \"rules\", \"scope\", \"scrolling\", \"selected\", \"shape\", \"target\", \"text\", \"type\", \"valign\", \"valuetype\", \"vlink\"]);\nfunction shouldIgnoreCase(selector, options) {\n  return typeof selector.ignoreCase === \"boolean\" ? selector.ignoreCase : selector.ignoreCase === \"quirks\" ? !!options.quirksMode : !options.xmlMode && caseInsensitiveAttributes.has(selector.name);\n}\n/**\n * Attribute selectors\n */\nexport var attributeRules = {\n  equals: function equals(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length === value.length && attr.toLowerCase() === value && next(elem);\n      };\n    }\n    return function (elem) {\n      return adapter.getAttributeValue(elem, name) === value && next(elem);\n    };\n  },\n  hyphen: function hyphen(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = value.length;\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function hyphenIC(elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && (attr.length === len || attr.charAt(len) === \"-\") && attr.substr(0, len).toLowerCase() === value && next(elem);\n      };\n    }\n    return function hyphen(elem) {\n      var attr = adapter.getAttributeValue(elem, name);\n      return attr != null && (attr.length === len || attr.charAt(len) === \"-\") && attr.substr(0, len) === value && next(elem);\n    };\n  },\n  element: function element(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name,\n      value = data.value;\n    if (/\\s/.test(value)) {\n      return boolbase.falseFunc;\n    }\n    var regex = new RegExp(\"(?:^|\\\\s)\".concat(escapeRegex(value), \"(?:$|\\\\s)\"), shouldIgnoreCase(data, options) ? \"i\" : \"\");\n    return function element(elem) {\n      var attr = adapter.getAttributeValue(elem, name);\n      return attr != null && attr.length >= value.length && regex.test(attr) && next(elem);\n    };\n  },\n  exists: function exists(next, _ref, _ref2) {\n    var name = _ref.name;\n    var adapter = _ref2.adapter;\n    return function (elem) {\n      return adapter.hasAttrib(elem, name) && next(elem);\n    };\n  },\n  start: function start(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = value.length;\n    if (len === 0) {\n      return boolbase.falseFunc;\n    }\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length >= len && attr.substr(0, len).toLowerCase() === value && next(elem);\n      };\n    }\n    return function (elem) {\n      var _a;\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.startsWith(value)) && next(elem);\n    };\n  },\n  end: function end(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    var len = -value.length;\n    if (len === 0) {\n      return boolbase.falseFunc;\n    }\n    if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var _a;\n        return ((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.substr(len).toLowerCase()) === value && next(elem);\n      };\n    }\n    return function (elem) {\n      var _a;\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.endsWith(value)) && next(elem);\n    };\n  },\n  any: function any(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name,\n      value = data.value;\n    if (value === \"\") {\n      return boolbase.falseFunc;\n    }\n    if (shouldIgnoreCase(data, options)) {\n      var regex = new RegExp(escapeRegex(value), \"i\");\n      return function anyIC(elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return attr != null && attr.length >= value.length && regex.test(attr) && next(elem);\n      };\n    }\n    return function (elem) {\n      var _a;\n      return !!((_a = adapter.getAttributeValue(elem, name)) === null || _a === void 0 ? void 0 : _a.includes(value)) && next(elem);\n    };\n  },\n  not: function not(next, data, options) {\n    var adapter = options.adapter;\n    var name = data.name;\n    var value = data.value;\n    if (value === \"\") {\n      return function (elem) {\n        return !!adapter.getAttributeValue(elem, name) && next(elem);\n      };\n    } else if (shouldIgnoreCase(data, options)) {\n      value = value.toLowerCase();\n      return function (elem) {\n        var attr = adapter.getAttributeValue(elem, name);\n        return (attr == null || attr.length !== value.length || attr.toLowerCase() !== value) && next(elem);\n      };\n    }\n    return function (elem) {\n      return adapter.getAttributeValue(elem, name) !== value && next(elem);\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["boolbase","reChars","escapeRegex","value","replace","caseInsensitiveAttributes","Set","shouldIgnoreCase","selector","options","ignoreCase","quirksMode","xmlMode","has","name","attributeRules","equals","next","data","adapter","toLowerCase","elem","attr","getAttributeValue","length","hyphen","len","hyphenIC","charAt","substr","element","test","falseFunc","regex","RegExp","exists","hasAttrib","start","startsWith","end","endsWith","any","anyIC","includes","not"],"sources":["attributes.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}