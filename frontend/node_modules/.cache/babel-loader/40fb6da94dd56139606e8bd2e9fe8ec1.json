{"ast":null,"code":"import _regeneratorRuntime from\"C:/programowanko/react/schedule-formatter/schedule-formatter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/programowanko/react/schedule-formatter/schedule-formatter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import cheerio from\"cheerio\";export var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(link){var url,response,body,$,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=link;_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.text();case 6:body=_context.sent;$=cheerio.load(body);data=[\"\"];$(\"td.l\").each(function(i,element){if(element.children.length===1){if(element.children[0].type===\"text\"){if(element.children[0].data===\"zajęcia dodatkowe\"){data.push(\"zajecia dodatkowe\");}else{data.push(\"okienko\");}}}element.children.forEach(function(x){if(x.type===\"tag\"){if(x.children[0]){if(x.children.length>1){if(x.children[0].type===\"tag\"){if(x.children[0].children[0].type===\"text\"){data.push(x.children[0].children[0].data);}}if(x.children[4].type===\"tag\"){if(x.children[4].children[0].type===\"text\"){data.push(x.children[4].children[0].data);}}return;}if(x.children[0].type===\"tag\"){if(x.children[0].children[0].type===\"text\"){data.push(x.children[0].children[0].data);}}else if(x.children[0].type===\"text\"){if(x.children[0].data.includes(\"#\"))return;data.push(x.children[0].data);}}else{data.push(\"<br>\");}}else if(x.type===\"text\"){if(x.data.trim()===\"-(P)\"||x.data.trim()===\"-(N)\"){data.push(x.data);}}});});data.shift();return _context.abrupt(\"return\",data);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(_x){return _ref.apply(this,arguments);};}();var Scrapper=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getData(url);case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function Scrapper(_x2){return _ref2.apply(this,arguments);};}();export default Scrapper;","map":{"version":3,"names":["cheerio","getData","link","url","fetch","response","text","body","$","load","data","each","i","element","children","length","type","push","forEach","x","includes","trim","shift","Scrapper"],"sources":["C:/programowanko/react/schedule-formatter/schedule-formatter/src/data/Scrapper.tsx"],"sourcesContent":["import cheerio from \"cheerio\";\r\n\r\nexport const getData = async (link: string) => {\r\n  const url = link;\r\n\r\n  const response = await fetch(url);\r\n  const body = await response.text();\r\n\r\n  let $ = cheerio.load(body);\r\n\r\n  const data = [\"\"];\r\n\r\n  $(\"td.l\").each((i, element) => {\r\n    if (element.children.length === 1) {\r\n      if (element.children[0].type === \"text\") {\r\n        if (element.children[0].data === \"zajęcia dodatkowe\") {\r\n          data.push(\"zajecia dodatkowe\");\r\n        } else {\r\n          data.push(\"okienko\");\r\n        }\r\n      }\r\n    }\r\n    element.children.forEach((x) => {\r\n      if (x.type === \"tag\") {\r\n        if (x.children[0]) {\r\n          if (x.children.length > 1) {\r\n            if (x.children[0].type === \"tag\") {\r\n              if (x.children[0].children[0].type === \"text\") {\r\n                data.push(x.children[0].children[0].data);\r\n              }\r\n            }\r\n            if (x.children[4].type === \"tag\") {\r\n              if (x.children[4].children[0].type === \"text\") {\r\n                data.push(x.children[4].children[0].data);\r\n              }\r\n            }\r\n            return\r\n          }\r\n          if (x.children[0].type === \"tag\") {\r\n            if (x.children[0].children[0].type === \"text\") {\r\n              data.push(x.children[0].children[0].data);\r\n            }\r\n          } else if (x.children[0].type === \"text\") {\r\n            if (x.children[0].data.includes(\"#\")) return;\r\n            data.push(x.children[0].data);\r\n          }\r\n        } else {\r\n          data.push(\"<br>\");\r\n        }\r\n      } else if (x.type === \"text\") {\r\n        if (x.data.trim() === \"-(P)\" || x.data.trim() === \"-(N)\") {\r\n          data.push(x.data);\r\n        }\r\n      }\r\n    });\r\n  });\r\n  data.shift();\r\n  return data;\r\n};\r\n\r\nconst Scrapper = async (url: string) => {\r\n  return await getData(url);\r\n};\r\n\r\nexport default Scrapper;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}