{"ast":null,"code":"var _jsxFileName = \"C:\\\\programowanko\\\\react\\\\schedule-formatter\\\\schedule-formatter\\\\src\\\\data\\\\Scrapper.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DataContext = /*#__PURE__*/React.createContext(undefined);\nconst getData = async () => {\n  const url = \"https://podzial.mech.pk.edu.pl/stacjonarne/html/plany/o30.html\";\n  const response = await fetch(url);\n  const body = await response.text();\n  let $ = cheerio.load(body);\n  const data = [\"\"];\n  $(\"td.l\").each((i, element) => {\n    element.children.forEach(x => {\n      // console.log(x.type, Object.getOwnPropertyNames(x))\n      if (x.type === \"tag\") {\n        if (x.children[0]) {\n          if (x.children[0].type === \"tag\") {\n            if (x.children[0].children[0].type === \"text\") {\n              // console.log(\"----\")\n              // console.log(x.children[0].children[0].data)\n              data.push(x.children[0].children[0].data);\n              // console.log(\"----\")\n            }\n          } else if (x.children[0].type === \"text\") {\n            // console.log(\"tag cos innego\")\n            data.push(x.children[0].data);\n            // console.log(x.children[0].data)\n          }\n        } else {\n          // console.log(\"ds\")\n          data.push(\"pusta komorka\");\n        }\n\n        // if (x.children[0].type === \"text\") {\n        //   console.log(x.children[0].data);\n        // } else {\n        //   console.log(x.children[0]);\n        // }\n      } else if (x.type === \"text\") {\n        data.push(x.data);\n        if (x.data.trim() === \"\") {\n          // console.log(\"puste\")\n        } else {\n          // console.log(\"niepuste\")\n        }\n        // console.log(x.data);\n      }\n    });\n  });\n\n  return data;\n};\nconst Scrapper = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const data = getData();\n  console.log(data);\n  useEffect(() => {\n    // React advises to declare the async function directly inside useEffect\n    async function getToken() {\n      const headers = {\n        Authorization: authProps.idToken // using Cognito authorizer\n      };\n\n      const response = await axios.post(\"https://MY_ENDPOINT.execute-api.us-east-1.amazonaws.com/v1/\", API_GATEWAY_POST_PAYLOAD_TEMPLATE, {\n        headers\n      });\n      const data = await response.json();\n      setToken(data.access_token);\n    }\n    getToken();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: data,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 10\n  }, this);\n};\n_s(Scrapper, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Scrapper;\nexport default Scrapper;\nvar _c;\n$RefreshReg$(_c, \"Scrapper\");","map":{"version":3,"names":["React","useEffect","axios","cheerio","DataContext","createContext","undefined","getData","url","response","fetch","body","text","$","load","data","each","i","element","children","forEach","x","type","push","trim","Scrapper","console","log","getToken","headers","Authorization","authProps","idToken","post","API_GATEWAY_POST_PAYLOAD_TEMPLATE","json","setToken","access_token"],"sources":["C:/programowanko/react/schedule-formatter/schedule-formatter/src/data/Scrapper.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport cheerio from \"cheerio\";\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport const DataContext = React.createContext<\r\n  Promise<string[]> | string[] | undefined\r\n>(undefined);\r\n\r\nconst getData = async () => {\r\n  const url = \"https://podzial.mech.pk.edu.pl/stacjonarne/html/plany/o30.html\";\r\n\r\n  const response = await fetch(url);\r\n  const body = await response.text();\r\n\r\n  let $ = cheerio.load(body);\r\n\r\n  const data = [\"\"];\r\n\r\n  $(\"td.l\").each((i, element) => {\r\n    element.children.forEach((x) => {\r\n      // console.log(x.type, Object.getOwnPropertyNames(x))\r\n      if (x.type === \"tag\") {\r\n        if (x.children[0]) {\r\n          if (x.children[0].type === \"tag\") {\r\n            if (x.children[0].children[0].type === \"text\") {\r\n              // console.log(\"----\")\r\n              // console.log(x.children[0].children[0].data)\r\n              data.push(x.children[0].children[0].data);\r\n              // console.log(\"----\")\r\n            }\r\n          } else if (x.children[0].type === \"text\") {\r\n            // console.log(\"tag cos innego\")\r\n            data.push(x.children[0].data);\r\n            // console.log(x.children[0].data)\r\n          }\r\n        } else {\r\n          // console.log(\"ds\")\r\n          data.push(\"pusta komorka\");\r\n        }\r\n\r\n        // if (x.children[0].type === \"text\") {\r\n        //   console.log(x.children[0].data);\r\n        // } else {\r\n        //   console.log(x.children[0]);\r\n        // }\r\n      } else if (x.type === \"text\") {\r\n        data.push(x.data);\r\n        if (x.data.trim() === \"\") {\r\n          // console.log(\"puste\")\r\n        } else {\r\n          // console.log(\"niepuste\")\r\n        }\r\n        // console.log(x.data);\r\n      }\r\n    });\r\n  });\r\n  return data;\r\n};\r\n\r\nconst Scrapper: React.FC<Props> = ({ children }) => {\r\n  const data = getData();\r\n\r\n  console.log(data);\r\n\r\n  useEffect(() => {\r\n    // React advises to declare the async function directly inside useEffect\r\n    async function getToken() {\r\n      const headers = {\r\n        Authorization: authProps.idToken, // using Cognito authorizer\r\n      };\r\n      const response = await axios.post(\r\n        \"https://MY_ENDPOINT.execute-api.us-east-1.amazonaws.com/v1/\",\r\n        API_GATEWAY_POST_PAYLOAD_TEMPLATE,\r\n        { headers }\r\n      );\r\n      const data = await response.json();\r\n      setToken(data.access_token);\r\n    }\r\n\r\n    getToken();\r\n  }, []);\r\n\r\n  return <DataContext.Provider value={data}>{children}</DataContext.Provider>;\r\n};\r\n\r\nexport default Scrapper;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}