{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.select = exports.filter = exports.some = exports.is = exports.aliases = exports.pseudos = exports.filters = void 0;\nvar css_what_1 = require(\"css-what\");\nvar css_select_1 = require(\"css-select\");\nvar DomUtils = __importStar(require(\"domutils\"));\nvar boolbase = __importStar(require(\"boolbase\"));\nvar helpers_js_1 = require(\"./helpers.js\");\nvar positionals_js_1 = require(\"./positionals.js\");\n// Re-export pseudo extension points\nvar css_select_2 = require(\"css-select\");\nObject.defineProperty(exports, \"filters\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.filters;\n  }\n});\nObject.defineProperty(exports, \"pseudos\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.pseudos;\n  }\n});\nObject.defineProperty(exports, \"aliases\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.aliases;\n  }\n});\nvar UNIVERSAL_SELECTOR = {\n  type: css_what_1.SelectorType.Universal,\n  namespace: null\n};\nvar SCOPE_PSEUDO = {\n  type: css_what_1.SelectorType.Pseudo,\n  name: \"scope\",\n  data: null\n};\nfunction is(element, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return some([element], selector, options);\n}\nexports.is = is;\nfunction some(elements, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (typeof selector === \"function\") return elements.some(selector);\n  var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)),\n    plain = _a[0],\n    filtered = _a[1];\n  return plain.length > 0 && elements.some((0, css_select_1._compileToken)(plain, options)) || filtered.some(function (sel) {\n    return filterBySelector(sel, elements, options).length > 0;\n  });\n}\nexports.some = some;\nfunction filterByPosition(filter, elems, data, options) {\n  var num = typeof data === \"string\" ? parseInt(data, 10) : NaN;\n  switch (filter) {\n    case \"first\":\n    case \"lt\":\n      // Already done in `getLimit`\n      return elems;\n    case \"last\":\n      return elems.length > 0 ? [elems[elems.length - 1]] : elems;\n    case \"nth\":\n    case \"eq\":\n      return isFinite(num) && Math.abs(num) < elems.length ? [num < 0 ? elems[elems.length + num] : elems[num]] : [];\n    case \"gt\":\n      return isFinite(num) ? elems.slice(num + 1) : [];\n    case \"even\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 0;\n      });\n    case \"odd\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 1;\n      });\n    case \"not\":\n      {\n        var filtered_1 = new Set(filterParsed(data, elems, options));\n        return elems.filter(function (e) {\n          return !filtered_1.has(e);\n        });\n      }\n  }\n}\nfunction filter(selector, elements, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return filterParsed((0, css_what_1.parse)(selector), elements, options);\n}\nexports.filter = filter;\n/**\n * Filter a set of elements by a selector.\n *\n * Will return elements in the original order.\n *\n * @param selector Selector to filter by.\n * @param elements Elements to filter.\n * @param options Options for selector.\n */\nfunction filterParsed(selector, elements, options) {\n  if (elements.length === 0) return [];\n  var _a = (0, helpers_js_1.groupSelectors)(selector),\n    plainSelectors = _a[0],\n    filteredSelectors = _a[1];\n  var found;\n  if (plainSelectors.length) {\n    var filtered = filterElements(elements, plainSelectors, options);\n    // If there are no filters, just return\n    if (filteredSelectors.length === 0) {\n      return filtered;\n    }\n    // Otherwise, we have to do some filtering\n    if (filtered.length) {\n      found = new Set(filtered);\n    }\n  }\n  for (var i = 0; i < filteredSelectors.length && (found === null || found === void 0 ? void 0 : found.size) !== elements.length; i++) {\n    var filteredSelector = filteredSelectors[i];\n    var missing = found ? elements.filter(function (e) {\n      return DomUtils.isTag(e) && !found.has(e);\n    }) : elements;\n    if (missing.length === 0) break;\n    var filtered = filterBySelector(filteredSelector, elements, options);\n    if (filtered.length) {\n      if (!found) {\n        /*\n         * If we haven't found anything before the last selector,\n         * just return what we found now.\n         */\n        if (i === filteredSelectors.length - 1) {\n          return filtered;\n        }\n        found = new Set(filtered);\n      } else {\n        filtered.forEach(function (el) {\n          return found.add(el);\n        });\n      }\n    }\n  }\n  return typeof found !== \"undefined\" ? found.size === elements.length ? elements :\n  // Filter elements to preserve order\n  elements.filter(function (el) {\n    return found.has(el);\n  }) : [];\n}\nfunction filterBySelector(selector, elements, options) {\n  var _a;\n  if (selector.some(css_what_1.isTraversal)) {\n    /*\n     * Get root node, run selector with the scope\n     * set to all of our nodes.\n     */\n    var root = (_a = options.root) !== null && _a !== void 0 ? _a : (0, helpers_js_1.getDocumentRoot)(elements[0]);\n    var opts = __assign(__assign({}, options), {\n      context: elements,\n      relativeSelector: false\n    });\n    selector.push(SCOPE_PSEUDO);\n    return findFilterElements(root, selector, opts, true, elements.length);\n  }\n  // Performance optimization: If we don't have to traverse, just filter set.\n  return findFilterElements(elements, selector, options, false, elements.length);\n}\nfunction select(selector, root, options, limit) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  if (typeof selector === \"function\") {\n    return find(root, selector);\n  }\n  var _a = (0, helpers_js_1.groupSelectors)((0, css_what_1.parse)(selector)),\n    plain = _a[0],\n    filtered = _a[1];\n  var results = filtered.map(function (sel) {\n    return findFilterElements(root, sel, options, true, limit);\n  });\n  // Plain selectors can be queried in a single go\n  if (plain.length) {\n    results.push(findElements(root, plain, options, limit));\n  }\n  if (results.length === 0) {\n    return [];\n  }\n  // If there was only a single selector, just return the result\n  if (results.length === 1) {\n    return results[0];\n  }\n  // Sort results, filtering for duplicates\n  return DomUtils.uniqueSort(results.reduce(function (a, b) {\n    return __spreadArray(__spreadArray([], a, true), b, true);\n  }));\n}\nexports.select = select;\n/**\n *\n * @param root Element(s) to search from.\n * @param selector Selector to look for.\n * @param options Options for querying.\n * @param queryForSelector Query multiple levels deep for the initial selector, even if it doesn't contain a traversal.\n */\nfunction findFilterElements(root, selector, options, queryForSelector, totalLimit) {\n  var filterIndex = selector.findIndex(positionals_js_1.isFilter);\n  var sub = selector.slice(0, filterIndex);\n  var filter = selector[filterIndex];\n  // If we are at the end of the selector, we can limit the number of elements to retrieve.\n  var partLimit = selector.length - 1 === filterIndex ? totalLimit : Infinity;\n  /*\n   * Set the number of elements to retrieve.\n   * Eg. for :first, we only have to get a single element.\n   */\n  var limit = (0, positionals_js_1.getLimit)(filter.name, filter.data, partLimit);\n  if (limit === 0) return [];\n  /*\n   * Skip `findElements` call if our selector starts with a positional\n   * pseudo.\n   */\n  var elemsNoLimit = sub.length === 0 && !Array.isArray(root) ? DomUtils.getChildren(root).filter(DomUtils.isTag) : sub.length === 0 ? (Array.isArray(root) ? root : [root]).filter(DomUtils.isTag) : queryForSelector || sub.some(css_what_1.isTraversal) ? findElements(root, [sub], options, limit) : filterElements(root, [sub], options);\n  var elems = elemsNoLimit.slice(0, limit);\n  var result = filterByPosition(filter.name, elems, filter.data, options);\n  if (result.length === 0 || selector.length === filterIndex + 1) {\n    return result;\n  }\n  var remainingSelector = selector.slice(filterIndex + 1);\n  var remainingHasTraversal = remainingSelector.some(css_what_1.isTraversal);\n  if (remainingHasTraversal) {\n    if ((0, css_what_1.isTraversal)(remainingSelector[0])) {\n      var type = remainingSelector[0].type;\n      if (type === css_what_1.SelectorType.Sibling || type === css_what_1.SelectorType.Adjacent) {\n        // If we have a sibling traversal, we need to also look at the siblings.\n        result = (0, css_select_1.prepareContext)(result, DomUtils, true);\n      }\n      // Avoid a traversal-first selector error.\n      remainingSelector.unshift(UNIVERSAL_SELECTOR);\n    }\n    options = __assign(__assign({}, options), {\n      // Avoid absolutizing the selector\n      relativeSelector: false,\n      /*\n       * Add a custom root func, to make sure traversals don't match elements\n       * that aren't a part of the considered tree.\n       */\n      rootFunc: function (el) {\n        return result.includes(el);\n      }\n    });\n  } else if (options.rootFunc && options.rootFunc !== boolbase.trueFunc) {\n    options = __assign(__assign({}, options), {\n      rootFunc: boolbase.trueFunc\n    });\n  }\n  /*\n   * If we have another filter, recursively call `findFilterElements`,\n   * with the `recursive` flag disabled. We only have to look for more\n   * elements when we see a traversal.\n   *\n   * Otherwise,\n   */\n  return remainingSelector.some(positionals_js_1.isFilter) ? findFilterElements(result, remainingSelector, options, false, totalLimit) : remainingHasTraversal ?\n  // Query existing elements to resolve traversal.\n  findElements(result, [remainingSelector], options, totalLimit) :\n  // If we don't have any more traversals, simply filter elements.\n  filterElements(result, [remainingSelector], options);\n}\nfunction findElements(root, sel, options, limit) {\n  var query = (0, css_select_1._compileToken)(sel, options, root);\n  return find(root, query, limit);\n}\nfunction find(root, query, limit) {\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  var elems = (0, css_select_1.prepareContext)(root, DomUtils, query.shouldTestNextSiblings);\n  return DomUtils.find(function (node) {\n    return DomUtils.isTag(node) && query(node);\n  }, elems, true, limit);\n}\nfunction filterElements(elements, sel, options) {\n  var els = (Array.isArray(elements) ? elements : [elements]).filter(DomUtils.isTag);\n  if (els.length === 0) return els;\n  var query = (0, css_select_1._compileToken)(sel, options);\n  return query === boolbase.trueFunc ? els : els.filter(query);\n}","map":{"version":3,"mappings":"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","names":["Object","enumerable","get","UNIVERSAL_SELECTOR","type","css_what_1","Universal","namespace","SCOPE_PSEUDO","Pseudo","name","data","is","element","selector","options","some","exports","elements","plain","filtered","length","sel","filterByPosition","filter","elems","num","parseInt","NaN","isFinite","Math","abs","slice","_","i","filtered_1","Set","filterParsed","e","has","plainSelectors","filteredSelectors","found","filterElements","size","filteredSelector","missing","isTag","filterBySelector","forEach","el","add","root","opts","context","relativeSelector","push","findFilterElements","select","limit","find","results","map","findElements","DomUtils","uniqueSort","reduce","a","b","queryForSelector","totalLimit","filterIndex","findIndex","positionals_js_1","sub","partLimit","Infinity","elemsNoLimit","Array","isArray","getChildren","result","remainingSelector","remainingHasTraversal","Sibling","Adjacent","unshift","rootFunc","includes","boolbase","trueFunc","query","shouldTestNextSiblings","node","els"],"sources":["index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}