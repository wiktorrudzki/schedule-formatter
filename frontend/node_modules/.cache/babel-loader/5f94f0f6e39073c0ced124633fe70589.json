{"ast":null,"code":"import React from \"react\";\nimport cheerio from \"cheerio\";\nexport const DataContext = /*#__PURE__*/React.createContext(undefined);\nexport const getData = async () => {\n  const url = \"https://podzial.mech.pk.edu.pl/stacjonarne/html/plany/o30.html\";\n  const response = await fetch(url);\n  const body = await response.text();\n  let $ = cheerio.load(body);\n  const data = [\"\"];\n  $(\"td.l\").each((i, element) => {\n    if (element.children.length === 1) {\n      if (element.children[0].type === \"text\") {\n        // console.log(element.children[0].data)\n        if (element.children[0].data === \"zajęcia dodatkowe\") {\n          data.push(\"zajecia dodatkowe\");\n        } else {\n          data.push(\"okienko\");\n        }\n      }\n    }\n    // console.log(element.children.length)\n    // console.log(element.children)\n    element.children.forEach(x => {\n      // console.log(i, x);\n      // console.log(x.type, Object.getOwnPropertyNames(x))\n      if (x.type === \"tag\") {\n        if (x.children[0]) {\n          if (x.children[0].type === \"tag\") {\n            if (x.children[0].children[0].type === \"text\") {\n              // console.log(\"----\")\n              // console.log(x.children[0].children[0].data)\n              data.push(x.children[0].children[0].data);\n              // console.log(\"----\")\n            }\n          } else if (x.children[0].type === \"text\") {\n            // console.log(\"tag cos innego\")\n            if (x.children[0].data.includes(\"#\")) return;\n            data.push(x.children[0].data);\n            // console.log(x.children[0].data)\n          }\n        } else {\n          // console.log(\"ds\")\n          // data.push(\"pusta komorka\");\n        }\n        // console.log(\"tag\", x.children[0])\n        // if (x.children[0].type === \"text\") {\n        //   console.log(x.children[0].data);\n        // } else {\n        //   console.log(x.children[0]);\n        // }\n      } else if (x.type === \"text\") {\n        console.log(x.data);\n        if (x.data === \"-(P)\" || x.data === \"-(N)\") {\n          data.push(x.data);\n        }\n        // if (x.data === \"zajecia dodatkowe\") {\n        //   data.push(\"zajecia dodatkowe\");\n        // } else if (x.data.trim() === \"\") {\n        //   data.push(\"puste\");\n        // } else {\n        //   data.push(x.data);\n        // }\n        // console.log(x.data);\n      }\n    });\n  });\n\n  return data;\n};\nconst Scrapper = async () => {\n  return await getData();\n};\n_c = Scrapper;\nexport default Scrapper;\nvar _c;\n$RefreshReg$(_c, \"Scrapper\");","map":{"version":3,"names":["React","cheerio","DataContext","createContext","undefined","getData","url","response","fetch","body","text","$","load","data","each","i","element","children","length","type","push","forEach","x","includes","console","log","Scrapper"],"sources":["C:/programowanko/react/schedule-formatter/schedule-formatter/src/data/Scrapper.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport cheerio from \"cheerio\";\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport const DataContext = React.createContext<\r\n  Promise<string[]> | string[] | undefined\r\n>(undefined);\r\n\r\nexport const getData = async () => {\r\n  const url = \"https://podzial.mech.pk.edu.pl/stacjonarne/html/plany/o30.html\";\r\n\r\n  const response = await fetch(url);\r\n  const body = await response.text();\r\n\r\n  let $ = cheerio.load(body);\r\n\r\n  const data = [\"\"];\r\n\r\n  $(\"td.l\").each((i, element) => {\r\n    if (element.children.length === 1) {\r\n      if (element.children[0].type === \"text\") {\r\n        // console.log(element.children[0].data)\r\n        if (element.children[0].data === \"zajęcia dodatkowe\") {\r\n          data.push(\"zajecia dodatkowe\");\r\n        } else {\r\n          data.push(\"okienko\");\r\n        }\r\n      }\r\n    }\r\n    // console.log(element.children.length)\r\n    // console.log(element.children)\r\n    element.children.forEach((x) => {\r\n      // console.log(i, x);\r\n      // console.log(x.type, Object.getOwnPropertyNames(x))\r\n      if (x.type === \"tag\") {\r\n        if (x.children[0]) {\r\n          if (x.children[0].type === \"tag\") {\r\n            if (x.children[0].children[0].type === \"text\") {\r\n              // console.log(\"----\")\r\n              // console.log(x.children[0].children[0].data)\r\n              data.push(x.children[0].children[0].data);\r\n              // console.log(\"----\")\r\n            }\r\n          } else if (x.children[0].type === \"text\") {\r\n            // console.log(\"tag cos innego\")\r\n            if (x.children[0].data.includes(\"#\")) return;\r\n            data.push(x.children[0].data);\r\n            // console.log(x.children[0].data)\r\n          }\r\n        } else {\r\n          // console.log(\"ds\")\r\n          // data.push(\"pusta komorka\");\r\n        }\r\n        // console.log(\"tag\", x.children[0])\r\n        // if (x.children[0].type === \"text\") {\r\n        //   console.log(x.children[0].data);\r\n        // } else {\r\n        //   console.log(x.children[0]);\r\n        // }\r\n      } else if (x.type === \"text\") {\r\n        console.log(x.data)\r\n        if (x.data === \"-(P)\" || x.data === \"-(N)\") {\r\n          data.push(x.data);\r\n        }\r\n        // if (x.data === \"zajecia dodatkowe\") {\r\n        //   data.push(\"zajecia dodatkowe\");\r\n        // } else if (x.data.trim() === \"\") {\r\n        //   data.push(\"puste\");\r\n        // } else {\r\n        //   data.push(x.data);\r\n        // }\r\n        // console.log(x.data);\r\n      }\r\n    });\r\n  });\r\n  return data;\r\n};\r\n\r\nconst Scrapper = async () => {\r\n  return await getData();\r\n};\r\n\r\nexport default Scrapper;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAqB,OAAO;AAExC,OAAOC,OAAO,MAAM,SAAS;AAM7B,OAAO,MAAMC,WAAW,gBAAGF,KAAK,CAACG,aAAa,CAE5CC,SAAS,CAAC;AAEZ,OAAO,MAAMC,OAAO,GAAG,YAAY;EACjC,MAAMC,GAAG,GAAG,gEAAgE;EAE5E,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;EACjC,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;EAElC,IAAIC,CAAC,GAAGV,OAAO,CAACW,IAAI,CAACH,IAAI,CAAC;EAE1B,MAAMI,IAAI,GAAG,CAAC,EAAE,CAAC;EAEjBF,CAAC,CAAC,MAAM,CAAC,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,OAAO,KAAK;IAC7B,IAAIA,OAAO,CAACC,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;MACjC,IAAIF,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,KAAK,MAAM,EAAE;QACvC;QACA,IAAIH,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACJ,IAAI,KAAK,mBAAmB,EAAE;UACpDA,IAAI,CAACO,IAAI,CAAC,mBAAmB,CAAC;QAChC,CAAC,MAAM;UACLP,IAAI,CAACO,IAAI,CAAC,SAAS,CAAC;QACtB;MACF;IACF;IACA;IACA;IACAJ,OAAO,CAACC,QAAQ,CAACI,OAAO,CAAEC,CAAC,IAAK;MAC9B;MACA;MACA,IAAIA,CAAC,CAACH,IAAI,KAAK,KAAK,EAAE;QACpB,IAAIG,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,EAAE;UACjB,IAAIK,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,KAAK,KAAK,EAAE;YAChC,IAAIG,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,KAAK,MAAM,EAAE;cAC7C;cACA;cACAN,IAAI,CAACO,IAAI,CAACE,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACJ,IAAI,CAAC;cACzC;YACF;UACF,CAAC,MAAM,IAAIS,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACE,IAAI,KAAK,MAAM,EAAE;YACxC;YACA,IAAIG,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACJ,IAAI,CAACU,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtCV,IAAI,CAACO,IAAI,CAACE,CAAC,CAACL,QAAQ,CAAC,CAAC,CAAC,CAACJ,IAAI,CAAC;YAC7B;UACF;QACF,CAAC,MAAM;UACL;UACA;QACF;QACA;QACA;QACA;QACA;QACA;QACA;MACF,CAAC,MAAM,IAAIS,CAAC,CAACH,IAAI,KAAK,MAAM,EAAE;QAC5BK,OAAO,CAACC,GAAG,CAACH,CAAC,CAACT,IAAI,CAAC;QACnB,IAAIS,CAAC,CAACT,IAAI,KAAK,MAAM,IAAIS,CAAC,CAACT,IAAI,KAAK,MAAM,EAAE;UAC1CA,IAAI,CAACO,IAAI,CAACE,CAAC,CAACT,IAAI,CAAC;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;;EACF,OAAOA,IAAI;AACb,CAAC;AAED,MAAMa,QAAQ,GAAG,YAAY;EAC3B,OAAO,MAAMrB,OAAO,EAAE;AACxB,CAAC;AAAC,KAFIqB,QAAQ;AAId,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module"}